(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-23dc19ae"],{"1d58":function(t,e,s){"use strict";s("1f89")},"1f89":function(t,e,s){},e12a:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("page-scroll",{attrs:{footer:t.chooseStatus},scopedSlots:t._u([{key:"header",fn:function(){return[e("glTitle",{attrs:{title:t.title,showNotice:!1},scopedSlots:t._u([{key:"right",fn:function(){return[e("div",{staticClass:"choose",on:{click:function(e){t.chooseStatus=!t.chooseStatus}}},[t._v(" "+t._s(t.chooseStatus?t.$t("new.doc11"):t.$t("new.doc12"))+" ")])]},proxy:!0}])})]},proxy:!0},{key:"content",fn:function(){return[e("div",{staticClass:"tw-min-h-full tw-p-16px"},[t.emptyShow?e("EmptyData"):t._e(),t.emptyShow?t._e():e("van-pull-refresh",{attrs:{"success-text":t.$t("load.refreshed"),"head-height":"100"},on:{refresh:function(e){return t.onRefresh(0)}},model:{value:t.refreshing,callback:function(e){t.refreshing=e},expression:"refreshing"}},[e("van-list",{attrs:{finished:t.finished,"finished-text":t.$t("load.no_more"),"loading-text":t.$t("load.loading"),"immediate-check":t.check},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.noticeList,(function(s,i){return e("div",{key:i,staticClass:"tw-mb-16px",on:{click:function(e){return t.onView(s)}}},[e("div",{staticClass:"tw-mb-8px tw-text-center tw-text-12px tw-text-secondary"},[t._v(" "+t._s(s.date)+" ")]),e("div",{staticClass:"item-content"},[e("div",{directives:[{name:"show",rawName:"v-show",value:t.chooseStatus,expression:"chooseStatus"}],staticClass:"choose",on:{click:function(t){s.isChoose=!s.isChoose}}},[s.isChoose?e("svg-icon",{attrs:{name:"radio",size:"16"}}):e("van-icon",{attrs:{name:"circle",size:"40",color:"#D3DAE4"}})],1),e("van-swipe-cell",{staticClass:"van-swipe-cell",scopedSlots:t._u([{key:"right",fn:function(){return[e("div",{staticClass:"right"},[e("div",{staticClass:"delete",on:{click:function(e){return t.onDelete(s)}}},[e("van-icon",{staticClass:"icon",attrs:{name:"delete-o"}})],1)])]},proxy:!0}],null,!0)},[e("div",{staticClass:"tw-p-16px tw-bg-white tw-rounded-10px"},[e("div",{staticClass:"tw-mb-12px tw-text-14px"},[t._v(t._s(s.title))]),e("div",{staticClass:"tw-text-secondary"},[t._v(t._s(s.content))]),e("van-divider"),e("div",{staticClass:"tw-flex tw-justify-between tw-items-center"},[e("span",{staticClass:"tw-text-primary"},[t._v(t._s(t.$t("page3.doc20")))]),e("van-icon",{attrs:{name:"arrow"}})],1)],1)])],1)])})),0)],1)],1)]},proxy:!0},{key:"footer",fn:function(){return[e("div",{staticClass:"bot"},[e("div",{staticClass:"all",on:{click:t.onChooseAll}},[t._v(t._s(t.$t("new.doc13")))]),e("div",{staticClass:"del",on:{click:t.onChooseDel}},[t._v(t._s(t.$t("new.doc14")))])])]},proxy:!0}])},[e("ModalPop",{attrs:{title:t.$t("page6.doc207"),confirmText:t.$t("page3.doc5"),cancelText:t.$t("page.doc50"),text:t.tipsMsg},on:{confirm:t.onDeleteMes,cancel:function(e){t.showConfirmPop=!1}},model:{value:t.showConfirmPop,callback:function(e){t.showConfirmPop=e},expression:"showConfirmPop"}})],1)},o=[],n=(s("14d9"),{data(){return{title:this.$route.query.name,noticeList:[],loading:!1,finished:!1,totalPage:"",pageSize:0,refreshing:!1,emptyShow:!1,noticeListNum:0,check:!0,deleteInfo:{},showConfirmPop:!1,tipsMsg:"",deleteIds:[],chooseStatus:!1}},mounted(){document.title=this.$route.query.name,this.noticeList.length>0&&(this.noticeList=[],this.onRefresh())},methods:{onLoad(){setTimeout(()=>{this.refreshing&&(this.noticeList=[],this.refreshing=!1),this.getinfo()},100)},onDelete(t){this.deleteIds=[t.id],this.onDeleteMes()},onChooseDel(){this.deleteIds=[];let t=0;if(this.noticeList.forEach(e=>{e.isChoose&&(this.deleteIds.push(e.id),t+=1)}),0==t)return this.$toast(this.$t("new.doc16"));this.tipsMsg=this.$t("new.doc15",{n:t}),this.showConfirmPop=!0},onChooseAll(){this.noticeList.forEach(t=>{t.isChoose=!0})},async onDeleteMes(){this.showConfirmPop=!1;const t=this.URL.member.message_del,e={groupKey:this.$route.query.type,ids:this.deleteIds},{code:s,data:i,message:o}=await this.$post(t,e);this.$toast(o),0==s&&this.onRefresh()},onRefresh(){this.finished=!1,this.loading=!0,this.noticeList=[],this.pageSize=0,this.totalPage="",this.onLoad()},getinfo(){if(this.pageSize=this.pageSize+1,this.pageIndex==this.totalPage)return this.loading=!1,void(this.finished=!0);this.$post(this.URL.member.message_list,{groupKey:this.$route.query.type,page:this.pageSize,pageSize:10}).then(t=>{if(0==t.code){if(2001==t.code)return this.loading=!0,this.finished=!1,void(this.emptyShow=!0);this.totalPage=t.data.page.totalPage,this.pageIndex=t.data.page.index;let e=t.data.list;e.forEach(t=>{t.isChoose=!1}),this.noticeList.push(...e),this.emptyShow=0==this.noticeList.length,this.loading=!1}else this.$toast(t.message)})},onView(t){this.chooseStatus||this.$router.push({path:"/notice/view",query:{title:t.title,doc:t.richText,time:t.date}})}}}),a=n,c=(s("1d58"),s("2877")),h=Object(c["a"])(a,i,o,!1,null,"c6a52e04",null);e["default"]=h.exports}}]);