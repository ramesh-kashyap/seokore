(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2ec80ff3"],{"5aa0":function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t._self._c;return e("page-scroll",{scopedSlots:t._u([{key:"header",fn:function(){return[e("glTitle",{attrs:{theme:t.styleSetting.dark?"light":"dark","bg-color":t.styleSetting.dark?"#18191c":"#fff"},scopedSlots:t._u([{key:"right",fn:function(){return[e("svg-icon",{attrs:{name:"setting",color:t.styleSetting.dark?"#fff":"#18191c"},on:{click:t.handSetShow}})]},proxy:!0}])})]},proxy:!0},{key:"content",fn:function(){return[e("div",{staticClass:"tw-min-h-full",class:t.styleSetting.dark?"tw-bg-black tw-text-white":"tw-bg-white tw-text-black"},[t.$route.query.forwardPath?e("div",{staticClass:"tw-relative tw-flex tw-justify-center tw-items-center"},[e("div",{directives:[{name:"show",rawName:"v-show",value:!t.isPlaying,expression:"!isPlaying"}],staticClass:"tw-absolute",on:{click:t.getVideo}},[e("van-icon",{attrs:{name:"play-circle-o",size:"48"}})],1),e("video",{ref:"videoElement",attrs:{src:t.$route.query.forwardPath,controls:"",muted:"",poster:t.dataInfo.images[0]},domProps:{muted:!0},on:{play:t.onPlay,pause:t.onPause}})]):t._e(),e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.dataInfo.images[0],expression:"dataInfo.images[0]"}],staticClass:"tw-w-full tw-h-auto"}),e("div",{staticClass:"tw-p-16px"},[e("div",{staticClass:"tw-mb-16px tw-flex tw-items-center"},[e("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.dataInfo.authorAvatar,expression:"dataInfo.authorAvatar"}],staticClass:"tw-w-48px tw-h-48px tw-rounded-full",attrs:{alt:""}}),e("div",{staticClass:"tw-ml-12px"},[e("div",{staticClass:"tw-text-16px",domProps:{innerHTML:t._s(t.dataInfo.authorNickname)}}),e("div",{staticClass:"tw-text-12px tw-text-secondary"},[t._v(" "+t._s(t.dataInfo.time)+" ")])])]),e("div",{staticClass:"doc",style:{fontSize:t.styleSetting.size+"rem"},domProps:{innerHTML:t._s(t.dataInfo.content)}})])]),e("van-popup",{attrs:{position:"bottom",round:"",closeable:"","get-container":"body"},model:{value:t.setShow,callback:function(e){t.setShow=e},expression:"setShow"}},[e("div",{staticClass:"tw-p-14px",class:t.styleSetting.dark?"tw-bg-black tw-text-white":"tw-bg-white tw-text-black"},[e("div",{staticClass:"tw-mb-16px tw-text-16px"},[t._v(t._s(t.$t("page5.doc47")))]),e("div",{staticClass:"tw-mb-12px"},[t._v(t._s(t.$t("page5.doc48")))]),e("ul",{staticClass:"font-list tw-flex tw-justify-between tw-items-center tw-gap-16px"},t._l(t.sizeList,(function(s){return e("li",{key:s.size,staticClass:"tw-relative tw-flex-1 tw-p-12px tw-leading-none tw-text-center tw-text-16px tw-text-secondary tw-bg-body tw-rounded-8px",class:{"linear-gradient-primary":s.size==t.selectedSize},on:{click:function(e){t.selectedSize=s.size}}},[t._v(" "+t._s(s.name)+" "),e("svg-icon",{directives:[{name:"show",rawName:"v-show",value:s.size==t.selectedSize,expression:"item.size == selectedSize"}],staticClass:"tw-absolute tw-top-0 tw-right-0",attrs:{name:"checked-top",color:"#fff"}})],1)})),0),e("div",{staticClass:"tw-mt-16px tw-mb-24px tw-flex tw-justify-between tw-items-center"},[e("span",[t._v(t._s(t.$t("page5.doc52")))]),e("van-switch",{attrs:{size:".6rem","active-color":"#0A71F7","inactive-color":"#dcdee0"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1),e("div",{staticClass:"tw-flex tw-justify-between tw-items-center tw-gap-16px"},[e("van-button",{attrs:{block:""},on:{click:function(e){t.setShow=!1}}},[t._v(" "+t._s(t.$t("page5.doc42"))+" ")]),e("van-button",{attrs:{type:"primary",block:""},on:{click:t.handSet}},[t._v(t._s(t.$t("page5.doc53")))])],1)])])]},proxy:!0}])})},a=[],o=(s("14d9"),null),n={data(){return{setShow:!1,hasGo:!0,sizeList:[{name:this.$t("page5.doc49"),size:.32},{name:this.$t("page5.doc50"),size:.38},{name:this.$t("page5.doc51"),size:.44}],selectedSize:.32,checked:Boolean(localStorage.getItem("dark")),styleSetting:{size:0==localStorage.getItem("size")?localStorage.getItem("size"):.32,dark:Boolean(localStorage.getItem("dark"))},dataInfo:[],message:"",commentId:"",toUserId:0,toIndex:"",content:"",commentData:[],loading:!1,finished:!1,totalPage:"",pageSize:0,refreshing:!1,emptyShow:!1,datalistNum:0,check:!0,finishedText:this.$t("load.no_more"),timer:null,newsData:[],likeStartVal:0,likeEndVal:0,cid:0,tid:0,showReport:!1,showReportState:!1,showReportType:!1,ReportType:[],dataType:"",ReportName:"",isPlaying:!1}},mounted(){0==this.styleSetting.size&&(this.styleSetting.size=.32),this.getInfo(1)},beforeDestroy(){clearInterval(this.timer)},methods:{getReportBtn(t){this.$post(this.URL.home.reportCreate,{dataId:this.commentId,dataType:this.dataType,reasonType:t,content:this.content}).then(t=>{this.$toast(this.$t("page.doc350")),0==t.code&&(this.showReportType=!1,this.commentId="",this.toUserId=0,this.toIndex="")})},handType(){this.$post(this.URL.home.reportType,{}).then(t=>{0==t.code&&(this.ReportType=t.data,this.showReportState=!1,this.showReportType=!0)})},gtouchstart(t,e,s,i,a,n,r){var h=this;return o=setTimeout((function(){o=0,document.oncontextmenu=function(t){return!1},h.showReportState=!0,setTimeout((function(){h.commentId=t,h.toUserId=e,h.toIndex=s,h.content=n,h.dataType=r,h.ReportName=i}),500)}),500),!1},gtouchend:function(){return clearTimeout(o),!1},gtouchmove:function(){clearTimeout(o),o=0},longPress:function(){o=0},getVideo(){const t=this.$refs.videoElement;t.play(),this.isPlaying=!t.paused},onPlay(){this.isPlaying=!0},onPause(){this.isPlaying=!1},handArticleUrl(t){this.$route.query.isApp?this.$router.replace({path:"/news/view",query:{isApp:1,id:t,token:this.$route.query.token,lang:this.$route.query.lang}}):this.$router.replace({path:"/news/view",query:{id:t}}),this.$router.go(0)},getNews(){this.$post(this.URL.article.list,{categoryId:0,filterType:3,page:1,pageSize:10}).then(t=>{0==t.code&&(this.newsData=t.data.list)})},handReport(){this.showReport=!0},handSetShow(){this.setShow=!0},getRead(){this.$post(this.URL.article.read,{articleId:this.$route.query.id}).then(t=>{0==t.code||clearInterval(this.timer)})},handReportCancel(){this.showReportState=!1,this.commentId="",this.toUserId=0,this.toIndex=""},handReplyReport(){this.showReportState=!1,this.$refs.message.focus()},handReply(t,e,s,i){this.commentId=t,this.toUserId=e,this.toIndex=s,this.$refs.message.focus()},handReplyList(t,e,s,i,a){let o=a||1,n=100;s&&(o+=1),this.$post(this.URL.article.replyList,{articleId:this.$route.query.id,commentId:t,page:o,pageSize:n}).then(t=>{if(0==t.code){if(this.commentData[e].replyList.length>0&&!s)return void(this.commentData[e].replyList=[]);if(t.data.list.length>0){let s=[];t.data.list.forEach(t=>{s.push({articleId:t.articleId,commentId:t.commentId,replyId:t.replyId,content:t.content,hasLike:t.hasLike,likeCount:t.likeCount,time:t.time,userAvatar:t.userAvatar,userId:t.userId,userNickname:t.userNickname,toUserId:t.toUserId,toUserNickname:t.toUserNickname,toUserAvatar:t.toUserAvatar})}),this.commentData[e].replyList.push(...s),this.commentData[e].conut=t.data.page.count,this.commentData[e].pageIndex=t.data.page.index,this.commentData[e].hasReplyList=i}}})},onLogs(){this.pageSize=0,this.totalPage="",this.finished=!1,this.loading=!0,this.commentData=[],this.emptyShow=!1,this.onLoad()},onLoad(){setTimeout(()=>{this.refreshing&&(this.commentData=[],this.refreshing=!1),this.getCommentList()},500)},getCommentList(){if(this.$route.query.id){if(this.pageSize=this.pageSize+1,this.pageIndex==this.totalPage)return this.loading=!1,void(this.finished=!0);this.$post(this.URL.article.commentList,{articleId:this.$route.query.id,page:this.pageSize,pageSize:20}).then(t=>{if(0==t.code){0==t.data.list.length?(this.emptyShow=!0,this.finishedText="",this.loading=!1,this.finished=!0):(this.emptyShow=!1,this.finishedText=this.$t("load.no_more")),this.totalPage=t.data.page.totalPage,this.pageIndex=t.data.page.index;let e=[];t.data.list.forEach(t=>{e.push({articleId:t.articleId,commentId:t.commentId,content:t.content,hasLike:t.hasLike,likeCount:t.likeCount,replyCount:t.replyCount,time:t.time,userAvatar:t.userAvatar,userId:t.userId,userNickname:t.userNickname,replyList:[],hasReplyList:!1})}),this.commentData.push(...e),this.loading=!1}else this.$toast(t.message)})}},getPingTop(){document.getElementById("target").scrollIntoView({behavior:"smooth"})},animateWidth(t,e){if("focus"==e)this.hasGo=!1;else{let t=this;setTimeout((function(){t.hasGo=!0,t.commentId="",t.toUserId=0,t.toIndex=""}),200)}},headPing(){0==this.toUserId?this.$post(this.URL.article.commentCreate,{articleId:this.$route.query.id,content:this.message}).then(t=>{0==t.code&&(this.message="",this.onLogs(),this.getInfo())}):this.$post(this.URL.article.replyCreate,{articleId:this.$route.query.id,commentId:this.commentId,toUserId:this.toUserId,content:this.message}).then(t=>{0==t.code&&(this.message="",this.onLogs(),this.getInfo())}),this.commentId="",this.toUserId=0,this.toIndex=""},headLike(t,e,s,i,a){this.$refs.refcountofore.start(),this.$post(this.URL.article.like,{dataId:t,dataType:e,hasCancel:!s}).then(t=>{0==t.code&&(0!==e&&(1==e&&(this.commentData[i].hasLike=s,this.commentData[i].likeCount=s?this.commentData[i].likeCount+1:this.commentData[i].likeCount-1),2==e&&(this.commentData[i].replyList[a].hasLike=s,this.commentData[i].replyList[a].likeCount=s?this.commentData[i].replyList[a].likeCount+1:this.commentData[i].replyList[a].likeCount-1)),this.getInfo())})},headFollow(t){this.$post(this.URL.article.follow,{authorId:this.dataInfo.authorId,hasCancel:t}).then(t=>{0==t.code&&(this.$toast(t.message),this.getInfo())})},handSet(){localStorage.setItem("size",this.selectedSize),localStorage.setItem("dark",this.checked),this.styleSetting.size=this.selectedSize,this.styleSetting.dark=this.checked,this.setShow=!1},getInfo(t){this.$post(this.URL.article.detail,{articleId:this.$route.query.id}).then(e=>{if(0==e.code&&(this.dataInfo=e.data,this.likeEndVal=e.data.likeCount,this.likeStartVal=e.data.likeCount,1==t)){window["handSetShow"]=t=>{this.handSetShow()};let t=this;this.timer=window.setInterval((function(){t.getRead()}),1e4)}}).catch(t=>{this.$router.replace("/news/")})},handUrl(t){this.$router.push(t)}}},r=n,h=(s("62f6"),s("2877")),l=Object(h["a"])(r,i,a,!1,null,null,null);e["default"]=l.exports},"62f6":function(t,e,s){"use strict";s("c7eb")},c7eb:function(t,e,s){}}]);