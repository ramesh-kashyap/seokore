(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5872ff8d"],{"151e":function(t,e,i){},"2aaf":function(t,e,i){"use strict";var s=function(){var t=this,e=t._self._c;return e("van-popup",{staticClass:"chain-select-popup",attrs:{round:"",position:"bottom",closeable:"","get-container":"body"},model:{value:t._show,callback:function(e){t._show=e},expression:"_show"}},[e("div",{staticClass:"tw-p-14px tw-text-16px tw-text-center"},[t._v(" "+t._s(t.$t("page.doc43"))+" ")]),e("div",{staticClass:"tw-px-16px tw-pb-16px"},[e("van-tabs",{staticClass:"tw-mb-16px",on:{click:t.handleCoinChange},model:{value:t.selectedCoinId,callback:function(e){t.selectedCoinId=e},expression:"selectedCoinId"}},t._l(t.list,(function(i){return e("van-tab",{key:i.coinId,attrs:{name:i.coinId},scopedSlots:t._u([{key:"title",fn:function(){return[e("div",{staticClass:"tw-flex tw-items-center tw-gap-4px"},[e("img",{staticClass:"tw-w-24px tw-h-24px",attrs:{src:i.coinIcon}}),t._v(" "+t._s(i.coinName)+" ")])]},proxy:!0}],null,!0)},t._l(i.multiChainData,(function(s){return e("div",{key:s.id,staticClass:"chain-item tw-mt-16px tw-p-14px tw-border tw-border-solid tw-border-hairline tw-rounded-10px",class:{active:s.chainName===t.selectedChainName},on:{click:function(e){return t.handleChainChange(s.chainName)}}},[e("div",{staticClass:"tw-text-14px"},[t._v(t._s(s.chainDesc))]),"recharge"===t.type?e("div",{staticClass:"tw-text-12px tw-text-secondary"},[e("p",[t._v(" "+t._s(t.$t("page6.doc53",{n:s.arrivalTime}))+" ")]),e("p",[t._v(" "+t._s(t.$t("page6.doc54"))+"â‰¥ "+t._s(s.rechargeMinNum)+" "+t._s(i.coinName)+" ")])]):e("div",{staticClass:"tw-text-12px tw-text-secondary"},[t._v(" "+t._s(t.$t("page6.doc55"))+"â‰¥ "+t._s(s.withdrawMinNum)+" "+t._s(i.coinName)+" ")])])})),0)})),1),e("van-button",{attrs:{type:"primary",block:""},on:{click:t.handleConfirm}},[t._v(" "+t._s(t.$t("page.doc36"))+" ")])],1)])},a=[],o={props:{type:{type:String,default:"recharge"},show:Boolean,list:Array,coinId:[Number,String],chainName:[Number,String]},data(){return{selectedCoinId:"",selectedChainName:""}},computed:{_show:{get(){return this.show},set(t){this.$emit("update:show",t)}},chains(){try{const t=this.list.find(t=>t.coinId===this.coinId);return t?t.multiChainData:[]}catch{return[]}}},watch:{show(t){t&&(this.selectedCoinId=this.coinId,this.selectedChainName=this.chainName)}},methods:{handleCoinChange(t){if(this.selectedCoinId===t)return;this.selectedCoinId=t;const e=this.list.find(e=>e.coinId===t),i=e.multiChainData;i.some(t=>t.chainName===this.selectedChainName)||(this.selectedChainName=i[0].chainName)},handleChainChange(t){this.selectedChainName=t},handleConfirm(){this._show=!1,this.$emit("confirm",{chainName:this.selectedChainName,coinId:this.selectedCoinId})}}},n=o,c=(i("57b8"),i("2877")),h=Object(c["a"])(n,s,a,!1,null,null,null);e["a"]=h.exports},"53cf":function(t,e,i){"use strict";i("790f")},"57b8":function(t,e,i){"use strict";i("151e")},"6b47":function(t,e,i){"use strict";i.r(e);i("14d9");var s=function(){var t=this,e=t._self._c;return e("page-scroll",{attrs:{footer:!1},scopedSlots:t._u([{key:"header",fn:function(){return[e("glTitle",{attrs:{title:t.$t("title.doc11")}})]},proxy:!0},{key:"content",fn:function(){return[e("div",{staticClass:"page-withdraw tw-min-h-full tw-p-16px"},[e("div",{staticClass:"tw-mb-10px tw-text-14px"},[t._v(t._s(t.$t("page.doc44")))]),e("div",{staticClass:"tw-h-44px tw-px-14px tw-flex tw-justify-between tw-items-center tw-bg-white tw-rounded-10px",on:{click:function(e){t.chainShow=!0}}},[e("div",{staticClass:"tw-flex tw-items-center"},[e("img",{staticClass:"tw-w-24px",attrs:{src:t.coinIcon,alt:""}}),e("span",{staticClass:"tw-pl-8px"},[t._v(t._s(t.coinName))])]),e("van-icon",{attrs:{name:"arrow",color:"#B6BCC6"}})],1),e("div",{staticClass:"tw-mt-18px tw-mb-10px tw-text-14px"},[t._v(" "+t._s(t.$t("page.doc43"))+" ")]),e("div",{staticClass:"tw-h-44px tw-px-14px tw-flex tw-justify-between tw-items-center tw-bg-white tw-rounded-10px",on:{click:function(e){t.chainShow=!0}}},[e("span",[t._v(t._s(t.tokenType))]),e("van-icon",{attrs:{name:"arrow",color:"#B6BCC6"}})],1),e("div",{staticClass:"tw-mt-18px tw-mb-10px tw-text-14px"},[t._v(" "+t._s(t.$t("page.doc45"))+" ")]),e("van-field",{staticClass:"tw-rounded-10px",attrs:{placeholder:t.$t("page6.doc52"),readonly:""},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("svg-icon",{attrs:{name:"address-book",size:"24"},on:{click:function(e){return t.$router.push("/my/address")}}})]},proxy:!0}]),model:{value:t.withdrawAddress,callback:function(e){t.withdrawAddress=e},expression:"withdrawAddress"}}),e("div",{staticClass:"tw-mt-18px tw-mb-10px tw-text-14px"},[t._v(" "+t._s(t.$t("page.doc46"))+" ")]),e("FocusedField",{attrs:{type:"number",min:t.levelData.minWithdrawAmount,max:t.levelData.maxWithdrawAmount,placeholder:t.$t("page.doc47")},on:{input:t.onInput},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("div",{staticClass:"tw-text-primary",on:{click:t.onInputAll}},[t._v(" "+t._s(t.$t("page.doc48"))+" ")])]},proxy:!0}]),model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),e("div",{staticClass:"tw-mb-16px tw-p-14px tw-h-38px tw-flex tw-justify-between tw-items-center tw-bg-secondary tw-bg-opacity-10 tw-rounded-bl-10px tw-rounded-br-10px"},[e("span",{staticClass:"tw-text-secondary"},[t._v(t._s(t.$t("page4.doc17")))]),e("span",{staticClass:"tw-text-success"},[t._v(" "+t._s(t.common.decal4(t.realAmount))+" USDT ")])]),e("div",{staticClass:"tw-mb-12px tw-flex tw-justify-between tw-items-center"},[e("span",{staticClass:"tw-text-secondary"},[t._v(" "+t._s(t.$t("page4.doc18"))+" "+t._s(t.common.accMul(t.feeRate,100))+" % ")]),e("span",[t._v(t._s(t.common.decal4(t.feeAmount))+" USDT")])]),e("div",{staticClass:"tw-mb-12px tw-flex tw-justify-between tw-items-center"},[e("span",{staticClass:"tw-text-secondary"},[t._v(" "+t._s(t.$t("page4.doc106"))+" ")]),null==t.configInfo.freeFeeDay?e("div",[t._v(" "+t._s(t.$t("load.loading"))+" ")]):t._e(),1==t.configInfo.freeFeeDay?e("div",[e("van-count-down",{attrs:{time:t.time},on:{finish:t.finish}})],1):t._e(),t.configInfo.freeFeeDay>1?e("div",[t._v(" "+t._s(Math.ceil(t.configInfo.freeFeeDay))+" "+t._s(t.$t("page4.doc107"))+" ")]):t._e(),0==t.configInfo.freeFeeDay?e("div",[t._v(" "+t._s(t.$t("page4.doc94"))+" ")]):t._e()]),e("div",{staticClass:"tw-mb-12px tw-flex tw-justify-between tw-items-center"},[e("span",{staticClass:"tw-text-secondary"},[t._v(" "+t._s(t.$t("page4.doc21"))+" ")]),e("span",[t._v(t._s(t.levelData.minWithdrawAmount)+" USDT")])]),e("div",{staticClass:"tw-mb-12px tw-flex tw-justify-between tw-items-center"},[e("span",{staticClass:"tw-text-secondary"},[t._v(" "+t._s(t.$t("page4.doc22"))+" ")]),e("span",[t._v(t._s(t.levelData.maxWithdrawAmount)+" USDT")])]),e("div",{staticClass:"tw-mt-18px tw-mb-24px tw-p-14px tw-text-14px tw-bg-white tw-rounded-10px"},[e("div",{staticClass:"tw-flex tw-items-center"},[e("van-icon",{staticClass:"tw-text-20px",attrs:{name:"warning",color:"#0A71F7"}}),e("span",{staticClass:"tw-text-primary tw-pl-8px"},[t._v(" "+t._s(t.$t("page.doc71"))+" ")])],1),e("div",{staticClass:"tw-text-14px tw-text-secondary tw-mt-8px",domProps:{innerHTML:t._s(t.withdrawRules.description)}})]),e("van-button",{attrs:{type:"primary",block:""},on:{click:t.onConfirm}},[t._v(" "+t._s(t.$t("page.doc36"))+" ")])],1),e("ChainSelectPopup",{attrs:{type:"withdraw",show:t.chainShow,coinId:t.coinId,chainName:t.chainName,list:t.coinList},on:{"update:show":function(e){t.chainShow=e},"update:coinId":function(e){t.coinId=e},"update:coin-id":function(e){t.coinId=e},"update:chainName":function(e){t.chainName=e},"update:chain-name":function(e){t.chainName=e},confirm:t.handleChainChange}}),e("van-popup",{attrs:{round:"",position:"bottom",closeable:"","get-container":"body"},model:{value:t.isShowPay,callback:function(e){t.isShowPay=e},expression:"isShowPay"}},[e("div",{staticClass:"tw-h-full"},[e("div",{staticClass:"tw-p-14px tw-text-16px tw-text-center"},[t._v(" "+t._s(t.$t("page.doc231"))+" ")]),e("div",{staticClass:"tw-px-16px"},[e("van-password-input",{attrs:{value:t.password,gutter:10,focused:t.isShowPay},on:{focus:function(e){t.isShowKeyboard=!0}}}),t.isGoogleShow?[e("div",{staticClass:"tw-mt-16px tw-mb-10px tw-text-14px"},[t._v(" "+t._s(t.$t("page4.doc115"))+" ")]),e("van-field",{staticClass:"tw-mb-16px tw-rounded-10px",attrs:{type:"digit",maxlength:"6",placeholder:t.$t("page3.doc4")},model:{value:t.googleCode,callback:function(e){t.googleCode=e},expression:"googleCode"}})]:t._e(),e("van-button",{attrs:{type:"primary",block:""},on:{click:t.onConfirmPwd}},[t._v(" "+t._s(t.$t("page.doc36"))+" ")])],2),e("div",{staticClass:"tw-mt-24px"},[e("van-number-keyboard",{staticClass:"!tw-relative",attrs:{title:t.$t("page.doc41"),show:t.isShowKeyboard,"hide-on-click-outside":!1,maxlength:"6"},on:{blur:function(e){t.isShowKeyboard=!1}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)])])]},proxy:!0}])})},a=[],o=i("2f62"),n=i("2aaf"),c={components:{ChainSelectPopup:n["a"]},data(){return{chainShow:!1,coinId:"",coinIcon:"",chainName:"",withdrawAddress:"",coinList:[],amount:"",isFocus:!1,configInfo:[],feeAmount:0,realAmount:0,mobile:"",isShowPay:!1,isShowKeyboard:!1,googleCode:"",password:"",isBtnLoading:!1,countDownTime:"",levelList:{},isGoogleShow:!1,withdrawRules:[],levelData:{},feeRate:0,routeQuery:{}}},computed:{...Object(o["d"])(["userData"]),coinName(){try{return this.coinList.find(t=>t.coinId===this.coinId).coinName}catch(t){return""}},tokenType(){try{const t=this.coinList.find(t=>t.coinId===this.coinId).multiChainData;return t.find(t=>t.chainName===this.chainName).tokenType}catch(t){return""}},address(){try{const{chainName:t,address:e}=this.routeQuery;return this.chainName===t?e:this.withdrawAddress}catch(t){return this.withdrawAddress}}},mounted(){if(this.isGoogleShow=this.userData.hasOpenGoogleAuth,this.routeQuery={},!this.userData.hasSetPassword)return void this.$router.replace("/my/password_trade?action=set");const t=sessionStorage.getItem("chainName"),e=sessionStorage.getItem("address");t&&e&&(this.routeQuery={chainName:t,address:e},this.withdrawAddress=e,this.chainName=t,sessionStorage.removeItem("chainName"),sessionStorage.removeItem("address")),this.getLevelData(),this.getCoinList(0),this.getWithdrawRules()},methods:{getWithdrawRules(){this.$post(this.URL.home.article,{categoryType:"WITHDRAWAL_RULES"}).then(t=>{0==t.code?this.withdrawRules=t.data:this.$toast(t.message)})},finish(){this.configInfo.freeFeeDays=0},onInput(){let{maxWithdrawAmount:t}=this.levelData;t=Number(t),this.amount=this.common.amountFloat(this.amount),this.amount>t&&(this.amount=t),""!==this.amount?this.getFee():(this.feeAmount=0,this.realAmount=0)},onInputAll(){parseFloat(this.configInfo.balance)<=0?this.amount=0:(this.amount=parseInt(this.configInfo.balance),this.getFee(1))},getFee(t){let e=0;if(this.configInfo.hasFee){let t=this.common.accMul(this.amount,this.configInfo.coinPrice),i=this.common.accMul(t,this.feeRate),s=this.common.accDiv(i,this.configInfo.feeCoinPrice);e=s,e<this.configInfo.feeMin&&(e=this.configInfo.feeMin)}if(1==t){this.feeAmount=e;let t=this.amount*this.configInfo.taxRate;return this.realAmount=this.common.accSub(this.amount,e),this.realAmount=this.common.accSub(this.realAmount,t),void(this.realAmount=this.realAmount<0?0:this.realAmount)}this.feeAmount=e;let i=this.amount*this.configInfo.taxRate;this.realAmount=this.common.accSub(this.amount,e),this.realAmount=this.common.accSub(this.realAmount,i),this.realAmount=this.realAmount<0?0:this.realAmount},handleChainChange({chainName:t,coinId:e}){this.chainName=t,this.coinId=e;let i=this.coinList.find(t=>t.coinId==this.coinId);this.coinIcon=i.coinIcon,this.getConfig()},getConfig(){this.$post(this.URL.user.wallet_config,{coinId:this.coinId,chainName:this.chainName}).then(t=>{if(0==t.code){this.configInfo=t.data;const e=t.data.freeFeeTime-(new Date).getTime();this.countDownTime=e,this.areaId=this.configInfo.withdrawMobilePrefix||"",this.mobile=this.configInfo.withdrawMobile;let{G2:i,G3:s,G4:a,G5:o,G6:n,G7:c}=this.levelList;this.configInfo.infoTextList=[this.$t("page2.doc203"),"br",this.$t("page2.doc204"),this.$t("page2.doc205")+this.configInfo.feeMin+this.$t("page2.doc206"),this.$t("page2.doc207"),"br",this.$t("page2.doc208"),`G3${this.$t("page4.doc77")} ${1e3*i/10}%`,`G6${this.$t("page4.doc77")} ${1e3*s/10}%`,`G9${this.$t("page4.doc77")} ${1e3*a/10}%`,`G12${this.$t("page4.doc77")} ${1e3*o/10}%`,`G15${this.$t("page4.doc77")} ${1e3*n/10}%`,`G18${this.$t("page4.doc77")} ${1e3*c/10}%`]}})},getLevelData(){this.$post(this.URL.member.personal,{}).then(t=>{if(0==t.code){const e=t.data.level>0?t.data.level:0;this.$post(this.URL.level.list,{}).then(t=>{if(0==t.code){let i=[],s={};t.data.forEach((t,a)=>{e==t.level&&(this.levelData=t,this.feeRate=t.withdrawFeeRate),s["G"+(a+1)]=t.withdrawFeeRate,i.push(s)}),this.levelList=i[0]}})}})},getCoinList(t){this.$post(this.URL.wallet.coinList,{type:2}).then(e=>{if(0==e.code){var i;let s=t,a=0;const o=null===(i=this.$route.query)||void 0===i?void 0:i.chainName;o&&(s=e.data.findIndex(t=>{const e=t.multiChainData.findIndex(t=>t.chainName===o);return e>=0&&(a=e,!0)}));const n=e.data[s];this.coinId=n.coinId,this.coinIcon=n.coinIcon,this.chainName=n.multiChainData[a].chainName,this.coinList=e.data,this.getConfig()}})},onCopy(t){this.$toast(this.$t("page.doc52"))},onConfirm(){if(this.amount=this.common.amountFloat(this.amount),!this.userData.hasSetPassword)return this.onOpenLink("/my/password_trade?action=set"),void this.$toast(this.$t("page.doc42"));""!=this.address?""!=this.amount?this.isShowPay=!0:this.$toast(this.$t("page.doc47")):this.$toast(this.$t("page.doc51"))},onConfirmPwd(){var t;this.isShowKeyboard=!1,this.areaId=this.areaId.toString().replace(/\D/g,""),this.mobile=null===(t=this.mobile)||void 0===t?void 0:t.toString().replace(/\D/g,""),this.$post(this.URL.user.wallet_btn,{amount:this.amount,password:this.$md5(this.password),coinId:this.coinId,chainName:this.chainName,toAddress:this.address,remark:"",withdrawMobilePrefix:this.areaId,withdrawMobile:this.mobile,googleCode:this.googleCode}).then(t=>{if(0==t.code)this.amount="",this.password="",this.googleCode="",this.code="",this.feeAmount=0,this.realAmount=0,this.isShowPay=!1,this.$toast(t.message),this.configInfo.address||this.getConfig(),this.onOpenLink("/wallet/index");else{if(10087==t.code)return void this.$toast(t.message);this.$toast(t.message)}}).finally(()=>{this.isShowPay=!1})},onOpenLink(t){this.$router.push({path:t,query:{}})}}},h=c,d=(i("53cf"),i("2877")),r=Object(d["a"])(h,s,a,!1,null,null,null);e["default"]=r.exports},"790f":function(t,e,i){}}]);